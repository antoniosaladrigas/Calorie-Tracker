<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Cals</title>
    
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">

    <style>
        :root {
            --ios-blue: #007AFF;
            --ios-bg: #f2f2f7;
        }
        body { 
            font-family: -apple-system, system-ui, sans-serif; 
            background-color: var(--ios-bg); 
            display: flex; flex-direction: column; align-items: center; justify-content: center; 
            height: 100vh; margin: 0; 
        }
        .card {
            background: white; padding: 30px; border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.05); width: 85%; max-width: 350px; text-align: center;
        }
        .label { color: #8e8e93; font-weight: 600; font-size: 0.8rem; letter-spacing: 0.5px; }
        #total { font-size: 4.5rem; font-weight: 800; color: var(--ios-blue); margin: 10px 0; }
        input {
            width: 100%; padding: 15px; font-size: 1.2rem; border: 1px solid #ddd;
            border-radius: 12px; margin-bottom: 15px; box-sizing: border-box;
            background: #f9f9f9; -webkit-appearance: none;
        }
        button {
            width: 100%; padding: 16px; font-size: 1.1rem; font-weight: 600;
            border-radius: 12px; border: none; background: var(--ios-blue); color: white;
            transition: transform 0.1s;
        }
        button:active { transform: scale(0.98); opacity: 0.9; }
        .reset-link { margin-top: 25px; color: #ff3b30; font-size: 0.8rem; font-weight: 500; cursor: pointer; }
    </style>
</head>
<body>

    <div class="card">
        <div class="label">CALORIES TODAY</div>
        <div id="total">0</div>
        
        <input type="number" id="input" placeholder="Enter amount" inputmode="numeric">
        <button onclick="addCals()">Add Calories</button>
        <div class="reset-link" onclick="manualReset()">Reset Today</div>
    </div>

    <script>
        const totalDisplay = document.getElementById('total');
        const inputField = document.getElementById('input');

        function init() {
            const savedDate = localStorage.getItem('lastDate');
            const today = new Date().toLocaleDateString();

            // Auto-reset if it's a new day
            if (savedDate !== today) {
                localStorage.setItem('dailyCals', 0);
                localStorage.setItem('lastDate', today);
            }
            render();
        }

        function render() {
            totalDisplay.innerText = localStorage.getItem('dailyCals') || 0;
        }

        function addCals() {
            let current = parseInt(localStorage.getItem('dailyCals')) || 0;
            let val = parseInt(inputField.value) || 0;
            
            if (val > 0) {
                localStorage.setItem('dailyCals', current + val);
                inputField.value = '';
                render();
            }
        }

        function manualReset() {
            if(confirm("Are you sure you want to clear today's count?")) {
                localStorage.setItem('dailyCals', 0);
                render();
            }
        }

        init();
    </script>
</body>
</html>
